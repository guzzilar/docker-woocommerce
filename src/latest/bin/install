#!/bin/sh

echo "Create Database"
service mysql start
mysqladmin -h localhost -P 3306 -u root -proot create www --force 2> /dev/null;

# Download the latest WordPress.
wp core download --allow-root

# Config
wp core config \
    --allow-root \
    --skip-check \
    --dbhost=127.0.0.1 \
    --dbname=www \
    --dbuser=root \
    --dbpass=root \
    --extra-php <<PHP
define( 'WP_DEBUG', true );
define( 'WP_DEBUG_LOG', true );
define( 'FS_METHOD', 'direct' );
PHP

# Install
wp core install \
    --allow-root \
    --url=http://127.0.0.1 \
    --title=OmiseWooCommerce \
    --admin_user=admin \
    --admin_password=admin \
    --admin_email=iam.nuttanon@gmail.com

# Install WooCommerce
wp plugin install woocommerce --allow-root --activate

chown -R www-data:www-data /var/www/html

apache2 -D FOREGROUND
